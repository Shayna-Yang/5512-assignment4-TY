<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tzu-Hsuan, Yang (ID: 35461586)">

<title>Does the Big Mac Index accurately reflect the real cost of living changes in Taiwan?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="assignment4_template_TY_files/libs/clipboard/clipboard.min.js"></script>
<script src="assignment4_template_TY_files/libs/quarto-html/quarto.js"></script>
<script src="assignment4_template_TY_files/libs/quarto-html/popper.min.js"></script>
<script src="assignment4_template_TY_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="assignment4_template_TY_files/libs/quarto-html/anchor.min.js"></script>
<link href="assignment4_template_TY_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="assignment4_template_TY_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="assignment4_template_TY_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="assignment4_template_TY_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="assignment4_template_TY_files/libs/bootstrap/bootstrap-1bc8a17f135ab3d594c857e9f48e611b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="assignment4_template_TY_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="assignment4_template_TY_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="assignment4_template_TY_files/libs/plotly-binding-4.10.4/plotly.js"></script>

<script src="assignment4_template_TY_files/libs/typedarray-0.1/typedarray.min.js"></script>

<script src="assignment4_template_TY_files/libs/jquery-3.5.1/jquery.min.js"></script>

<link href="assignment4_template_TY_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="assignment4_template_TY_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

<link href="assignment4_template_TY_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">

<script src="assignment4_template_TY_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script>



</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Does the Big Mac Index accurately reflect the real cost of living changes in Taiwan?</h1>
<p class="subtitle lead">Assignment 4 ETC5512</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Tzu-Hsuan, Yang (ID: 35461586) </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Data and Documenting</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Blog post</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">Behind the Scenes</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<section id="research-question" class="level3">
<h3 class="anchored" data-anchor-id="research-question">Research Question</h3>
<p>Does the Big Mac Index accurately reflect the real cost of living changes in Taiwan? Analyze between 2015 and 2024.</p>
<ul>
<li><p>How does the Big Mac price in Taiwan correlate with official CPI changes?</p></li>
<li><p>Is the Big Mac Index a reliable indicator of Taiwan’s actual exchange rate (NTD/USD)?</p></li>
</ul>
</section>
<section id="data-sources-and-suitability" class="level3">
<h3 class="anchored" data-anchor-id="data-sources-and-suitability">Data Sources and Suitability</h3>
<p>This blog post analyzes the relationship between the Big Mac Index, Taiwan’s official exchange rate, and domestic consumer prices to assess whether perceived increases in the cost of living are reflected in economic indicators. I selected three publicly available datasets that together provide a view of currency valuation, domestic price levels, and purchasing power:</p>
<section id="big-mac-data" class="level4">
<h4 class="anchored" data-anchor-id="big-mac-data">1. Big Mac Data</h4>
<ul>
<li><strong>Source:</strong> <a href="https://github.com/TheEconomist/big-mac-data?tab=readme-ov-file">The Economist (GitHub)</a></li>
<li><strong>Content:</strong> Prices of Big Macs around the world, actual exchange rates, implied purchasing power parity (PPP), and percentage under-/overvaluation relative to the US dollar. This data is published biannually (January and July).</li>
<li><strong>Last Updated:</strong> Feb, 2025</li>
<li><strong>Data Type:</strong> Sample</li>
<li><strong>Suitability:</strong>
<ul>
<li>Provides a standardized, internationally comparable measure of purchasing power.</li>
<li>The Big Mac Index offers a consumer-centered, intuitive proxy for real-world exchange rate discrepancies.</li>
</ul></li>
<li><strong>Limitations:</strong>
<ul>
<li>Only includes a single consumer good (Big Mac), which may not be representative of the overall cost of living.</li>
<li>Prices gathered from few of McDonald’s branches in each country, which may pose difference between urban and rural areas.</li>
</ul></li>
<li><strong>License:</strong> Creative Commons Attribution 4.0 International License (CC BY 4.0) - This license allows for use, sharing, and adaptation of the data generated by The Economist.</li>
<li><strong>Privacy/Ethics:</strong> Aggregated data, minimizing privacy concerns. No direct identifiers.</li>
</ul>
</section>
<section id="taiwan-consumer-price-index-cpi-data" class="level4">
<h4 class="anchored" data-anchor-id="taiwan-consumer-price-index-cpi-data">2. Taiwan Consumer Price Index (CPI) Data</h4>
<ul>
<li><strong>Source:</strong> <a href="https://eng.stat.gov.tw/">Taiwan Directorate-General of Budget, Accounting and Statistics</a></li>
<li><strong>Content:</strong> Monthly CPI data for Taiwan, representing national cost-of-living trends based on a fixed consumer basket (2016=100). Includes both index values and year-on-year percentage changes.</li>
<li><strong>Last Updated:</strong> 2025 Q1 (Quarterly Update)</li>
<li><strong>Data Type:</strong> Census</li>
<li><strong>Suitability:</strong>
<ul>
<li>Provides an authoritative measurement of domestic inflation trends.</li>
<li>The CPI data reflects broader household consumption trends beyond food alone, useful for cross-validating signals from the Big Mac Index.</li>
</ul></li>
<li><strong>Limitations:</strong>
<ul>
<li>The CPI is a lagging indicator and may not capture real-time consumer sentiment and may not reflect the experience of specific population groups.</li>
</ul></li>
<li><strong>License:</strong> Open Government Data License, version 1.0 (OGDL-Taiwan-1.0) - This license allows reproducing, adapting, compiling, publicly transmitting, or applying it on other methods, and as well as developing various products or services for the data and materials. <a href="https://eng.stat.gov.tw/cp.aspx?n=2313">Links to statement</a></li>
<li><strong>Privacy/Ethics:</strong> Aggregated data, minimizing privacy concerns. No direct identifiers.</li>
</ul>
</section>
<section id="ntdusd-exchange-rate-data" class="level4">
<h4 class="anchored" data-anchor-id="ntdusd-exchange-rate-data">3. NTD/USD Exchange Rate Data</h4>
<ul>
<li><strong>Source:</strong> <a href="https://www.cbc.gov.tw/en/mp-2.html">Central Bank of the Republic of China (Taiwan)</a></li>
<li><strong>Content:</strong> Selling exchange rate of New Taiwan Dollar (NTD) against US Dollar (USD), extracted for December and June each year between 2014 and 2024. The rates represent the official figures published by the Central Bank of Taiwan.</li>
<li><strong>Last Updated:</strong> May, 2025 (Monthly Update)</li>
<li><strong>Data Type:</strong> Official financial data</li>
<li><strong>Suitability:</strong>
<ul>
<li>Represents the actual market exchange rate used in international trade</li>
<li>Serves as the benchmark “real-world” reference to evaluate the Big Mac Index’s predictive alignment.</li>
</ul></li>
<li><strong>Limitations:</strong>
<ul>
<li>Exchange rates may not always align with domestic purchasing experiences.</li>
<li>The data reflects the official spot rate, which might not align with real-world consumer exchange rates that include fees, spreads, or intermediary costs.</li>
</ul></li>
<li><strong>License:</strong> Open Government Data License, version 1.0 (OGDL-Taiwan-1.0) - This license allows reproducing, adapting, compiling, publicly transmitting, or applying it on other methods, and as well as developing various products or services for the data and materials. <a href="https://www.cbc.gov.tw/en/cp-958-40419-F8209-2.html">Links to statement</a></li>
<li><strong>Privacy/Ethics:</strong> Aggregated data, minimizing privacy concerns. No direct identifiers.</li>
</ul>
</section>
<section id="australia-consumer-price-index-cpi-data" class="level4">
<h4 class="anchored" data-anchor-id="australia-consumer-price-index-cpi-data">4. Australia Consumer Price Index (CPI) Data</h4>
<ul>
<li><strong>Source:</strong> <a href="https://www.abs.gov.au/">Australian Bureau of Statistics</a></li>
<li><strong>Content:</strong> Annual percentage change in the Consumer Price Index (CPI) for Australia across all groups, including Trimmed Mean CPI. The dataset presents quarterly changes from Dec, 2014 to Dec, 2024.</li>
<li><strong>Last Updated:</strong> Jan, 2025 (Quarterly Update)</li>
<li><strong>Data Type:</strong> Census</li>
<li><strong>Suitability:</strong>
<ul>
<li>Provides a comprehensive overview of inflation trends across Australia.</li>
<li>The “All Groups CPI” reflects overall changes in the cost of living across all major spending categories.</li>
</ul></li>
<li><strong>Limitations:</strong>
<ul>
<li>The data is aggregated at the national level and may not reflect regional or household-level variations in cost of living.</li>
</ul></li>
<li><strong>License:</strong> Creative Commons Attribution 4.0 International licence (CC BY 4.0) - This license allows for use, sharing, and adaptation of the data generated by Australian Bureau of Statistics. <a href="https://www.abs.gov.au/website-privacy-copyright-and-disclaimer#accessibility">Links to statement</a></li>
<li><strong>Privacy/Ethics:</strong> Aggregated data, minimizing privacy concerns. No direct identifiers.</li>
</ul>
</section>
</section>
<section id="data-downloading-and-wrangling" class="level3">
<h3 class="anchored" data-anchor-id="data-downloading-and-wrangling">Data Downloading and Wrangling</h3>
<p>This section outlines the steps to download the datasets used analysis. All processing was done by R using packages. All data wrangling steps were documented in this report. A corresponding <code>README</code> and <code>data_dictionary</code> are included in the submission.</p>
<section id="big-mac-data-taiwan-and-australia" class="level4">
<h4 class="anchored" data-anchor-id="big-mac-data-taiwan-and-australia">1. Big Mac Data (Taiwan and Australia)</h4>
<p>Download steps:</p>
<ol type="1">
<li><p>Access the dataset via GitHub: <a href="https://github.com/TheEconomist/big-mac-data?tab=readme-ov-file">The Economist- Big Mac Data</a></p></li>
<li><p>Download the <code>big-mac-full-index.csv</code> in the output-data folder and save it to the <code>raw_data</code> folder</p></li>
<li><p>Load the dataset into project</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Library package</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read raw data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>bigmac_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"raw_data/big-mac-full-index.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># filter for Taiwan from 2015 to 2025</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>bigmac_tw <span class="ot">&lt;-</span> bigmac_data <span class="sc">|&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"Taiwan"</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">as.Date</span>(date),</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">year =</span> <span class="fu">year</span>(date),</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">month =</span> <span class="fu">month</span>(date)) <span class="sc">|&gt;</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2015</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">2025</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">USD_valuation =</span> (dollar_ex <span class="sc">-</span> USD_raw) <span class="sc">/</span> USD_raw </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># for compare ppp and actual rate</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, month, local_price, dollar_ex, USD_raw, USD_valuation)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># filter for Australia from 2015 to 2025</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>bigmac_au <span class="ot">&lt;-</span> bigmac_data <span class="sc">|&gt;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"Australia"</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">as.Date</span>(date),</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">year =</span> <span class="fu">year</span>(date),</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">month =</span> <span class="fu">month</span>(date)) <span class="sc">|&gt;</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2015</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">2025</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">USD_valuation =</span> (dollar_ex <span class="sc">-</span> USD_raw) <span class="sc">/</span> USD_raw </span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># for compare ppp and actual rate</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, month, local_price, dollar_ex, USD_raw, USD_valuation)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="taiwan-consumer-price-index-cpi-data-1" class="level4">
<h4 class="anchored" data-anchor-id="taiwan-consumer-price-index-cpi-data-1">2. Taiwan Consumer Price Index (CPI) Data</h4>
<p>Download steps:</p>
<ol type="1">
<li><p>Access to <a href="https://eng.stat.gov.tw/">Taiwan DGBAS official site</a> and click the <code>Data Query</code> banner to <a href="https://eng.stat.gov.tw/cl.aspx?n=4015">DGBAS Statistical Database</a></p></li>
<li><p>Open the <a href="https://nstatdb.dgbas.gov.tw/dgbasall/webMain.aspx?k=engmain">Macro Database</a> and choose: <code>Price Index</code> -&gt; <code>Consumer Price Index</code> -&gt; <code>1.1 Comsumer Price Indices by Basic Group</code></p></li>
<li><p>Set the filter condition:</p></li>
</ol>
<ul>
<li>Period: 2014-12~2024-12 (To match the lastest update of big mac index data)</li>
<li>Frequency: Monthly</li>
<li>Value Types: Value and Annual Change Rate</li>
<li>Output: CSV</li>
<li>Statistical Items: General Index</li>
</ul>
<ol start="4" type="1">
<li><p>Submit and download the dataset then save it to the <code>raw_data</code> folder</p></li>
<li><p>Load the dataset into project</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read raw data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>raw_cpi <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"raw_data/Monthly_CPI_2014-2024.csv"</span>, <span class="at">skip =</span> <span class="dv">2</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># filter data from Dec 2014 to Dec 2024</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>cpi_processed <span class="ot">&lt;-</span> raw_cpi <span class="sc">|&gt;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">period =</span> <span class="st">`</span><span class="at">Period</span><span class="st">`</span>,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">CPI_index =</span> <span class="st">`</span><span class="at">General Index</span><span class="st">`</span>,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">YoY_rate =</span> <span class="st">`</span><span class="at">Annual Change Rate(%)</span><span class="st">`</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter only the year-month in dataset</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(period, <span class="st">"^</span><span class="sc">\\</span><span class="st">d{4} [A-Za-z]{3}$"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">period =</span> <span class="fu">parse_date_time</span>(period, <span class="at">orders =</span> <span class="st">"Y b"</span>),</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">year</span>(period),</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">month</span>(period)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">6</span>)) <span class="sc">|&gt;</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, month, CPI_index, YoY_rate)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co"># match the period with big mac dataset</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>cpi_period_moved <span class="ot">&lt;-</span> cpi_processed <span class="sc">|&gt;</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>      month <span class="sc">==</span> <span class="dv">12</span> <span class="sc">~</span> year <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> year</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>      month <span class="sc">==</span> <span class="dv">12</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>      month <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="dv">7</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(year, month)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ntdusd-exchange-rate-data-1" class="level4">
<h4 class="anchored" data-anchor-id="ntdusd-exchange-rate-data-1">3. NTD/USD Exchange Rate Data</h4>
<p>Download steps:</p>
<ol type="1">
<li><p>Access to <a href="https://www.cbc.gov.tw/en/mp-2.html">Central Bank of the Republic of China (Taiwan)</a> and go to: <code>Foreign Exchange</code> -&gt; <code>Foreign Exchange Regime</code></p></li>
<li><p>Click into the <code>Monthly</code> and <code>Monthly_Historical</code> and get the url link.</p></li>
<li><p>Load the dataset into project</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define url</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>url_monthly <span class="ot">&lt;-</span> <span class="st">"https://www.cbc.gov.tw/en/cp-480-58819-C8475-2.html"</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>url_historical <span class="ot">&lt;-</span> <span class="st">"https://www.cbc.gov.tw/en/cp-480-58820-D92DC-2.html"</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># function to extract the table</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>scrape_exchange_rate <span class="ot">&lt;-</span> <span class="cf">function</span>(url) {</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># read html page</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  webpage <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># grab first table</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  tbl <span class="ot">&lt;-</span> webpage <span class="sc">|&gt;</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">pluck</span>(<span class="dv">1</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># columns name</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(tbl) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Period"</span>, <span class="st">"NTD_USD"</span>)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># for year loop</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  current_year <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dataframe for store the cleaned data</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  clean_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">integer</span>(),</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">integer</span>(),</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">NTD_USD =</span> <span class="fu">numeric</span>(),</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(tbl)) {</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    row <span class="ot">&lt;-</span> tbl[i, ]</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    period_str <span class="ot">&lt;-</span> row<span class="sc">$</span>Period</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    ntd_val <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(row<span class="sc">$</span>NTD_USD)</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    current_month <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># check the format</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">str_detect</span>(period_str, <span class="st">"^</span><span class="sc">\\</span><span class="st">d{4}/</span><span class="sc">\\</span><span class="st">s*1$"</span>)) {</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>      current_year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(period_str, <span class="st">"^</span><span class="sc">\\</span><span class="st">d{4}"</span>))</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>      current_month <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.na</span>(current_year) <span class="sc">&amp;&amp;</span> <span class="fu">str_detect</span>(period_str, <span class="st">"^</span><span class="sc">\\</span><span class="st">d+$"</span>)) {</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>      current_month <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(period_str)</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>      <span class="cf">next</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># keep only Jan. and Jul.</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (current_month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">12</span>)) {</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>      clean_data <span class="ot">&lt;-</span> <span class="fu">rbind</span>(clean_data, <span class="fu">data.frame</span>(</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> current_year,</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">month =</span> current_month,</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">NTD_USD =</span> ntd_val</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>      ))</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(clean_data)</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a><span class="co"># apply to both url</span></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>exchange_historical <span class="ot">&lt;-</span> <span class="fu">scrape_exchange_rate</span>(url_historical)</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>exchange_recent <span class="ot">&lt;-</span> <span class="fu">scrape_exchange_rate</span>(url_monthly)</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a><span class="co"># combine two data</span></span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>exchange_all <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(exchange_historical, exchange_recent) <span class="sc">|&gt;</span></span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, month) <span class="sc">|&gt;</span></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2014</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">2024</span>)</span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Shift the period</span></span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>exchange_all_shifted <span class="ot">&lt;-</span> exchange_all <span class="sc">|&gt;</span></span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">if_else</span>(month <span class="sc">==</span> <span class="dv">12</span>, year <span class="sc">+</span> <span class="dv">1</span>L, year),</span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">if_else</span>(month <span class="sc">==</span> <span class="dv">12</span>, <span class="dv">1</span>L, <span class="dv">7</span>L)</span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2015</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">2025</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="australia-consumer-price-index-cpi-data-1" class="level4">
<h4 class="anchored" data-anchor-id="australia-consumer-price-index-cpi-data-1">4. Australia Consumer Price Index (CPI) Data</h4>
<p>Download steps:</p>
<ol type="1">
<li><p>Access to <a href="https://www.abs.gov.au/">Australian Bureau of Statistics</a> and go to: <code>Statistics</code> -&gt; <code>Key economic indicators</code> -&gt; <code>Prices</code> -&gt; <code>Consumer Price Index</code></p></li>
<li><p>For matching the big mac data, click the previous releases to reach the version released Jan, 2025.</p></li>
<li><p>Click the download button and choose save table as csv for All groups CPI.</p></li>
<li><p>Load the dataset into project</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read raw data</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>raw_au_cpi <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"raw_data/All groups CPI and Trimmed mean, Australia, annual movement (%).csv"</span>, <span class="at">skip =</span> <span class="dv">1</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># filter data from Dec 2014 to Dec 2024</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>au_cpi_processed <span class="ot">&lt;-</span> raw_au_cpi <span class="sc">|&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">period =</span> <span class="dv">1</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">YoY_rate =</span> <span class="dv">2</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter only the year-month in dataset</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(period, <span class="st">"Jun|Dec"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">period =</span> <span class="fu">str_trim</span>(period),</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.integer</span>(<span class="fu">if_else</span>(<span class="fu">str_detect</span>(period, <span class="st">"Dec"</span>), </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">as.numeric</span>(<span class="fu">str_sub</span>(period, <span class="sc">-</span><span class="dv">2</span>)) <span class="sc">+</span> <span class="dv">2001</span>,  </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>                              <span class="co"># Dec-15 → 2016</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">as.numeric</span>(<span class="fu">str_sub</span>(period, <span class="sc">-</span><span class="dv">2</span>)) <span class="sc">+</span> <span class="dv">2000</span>)), </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>                              <span class="co"># Jun-15 → 2015</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(period, <span class="st">"Dec"</span>), <span class="dv">1</span>, <span class="dv">7</span>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2015</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">2025</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, month, YoY_rate) <span class="sc">|&gt;</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, month)<span class="sc">|&gt;</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">CPI_index =</span> <span class="fu">accumulate</span>(YoY_rate, <span class="cf">function</span>(prev, pct) prev <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> pct <span class="sc">/</span> <span class="dv">100</span>), <span class="at">.init =</span> <span class="dv">100</span>)[<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="combine-the-datasets" class="level4">
<h4 class="anchored" data-anchor-id="combine-the-datasets">5. Combine the datasets</h4>
<p>For further analysis, use <code>left_join()</code> and <code>bind_rows()</code> to combine all the processed datasets.</p>
<p>Dataset 1: Taiwan Big Mac Index with Taiwan CPI and Government Exchange Rate</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>bigmac_all <span class="ot">&lt;-</span> bigmac_tw <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(cpi_period_moved, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"month"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(exchange_all_shifted, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"month"</span>))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># save processed data</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(bigmac_all, <span class="st">"data/bigmac_2015-2025.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Dataset 2: Australia and Taiwan Big Mac Index and CPI Data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>cpi_period_moved <span class="ot">&lt;-</span> cpi_period_moved <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="st">"Taiwan"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>au_cpi_processed <span class="ot">&lt;-</span> au_cpi_processed <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="st">"Australia"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>bigmac_tw <span class="ot">&lt;-</span> bigmac_tw <span class="sc">|&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="st">"Taiwan"</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>bigmac_au <span class="ot">&lt;-</span> bigmac_au <span class="sc">|&gt;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="st">"Australia"</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>cpi_autw <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(cpi_period_moved, au_cpi_processed)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>bigmac_autw <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(bigmac_tw, bigmac_au)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># merge data</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>bigmac_cpi <span class="ot">&lt;-</span> <span class="fu">left_join</span>(bigmac_autw, cpi_autw,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>                        <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"year"</span>, <span class="st">"month"</span>))</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co"># save processed data</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(bigmac_cpi, <span class="st">"data/bigmac_cpi_2015-2025.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="reference" class="level3">
<h3 class="anchored" data-anchor-id="reference">Reference</h3>
<ol type="1">
<li><p>Big Mac Index- The Economist. (2025). Big Mac Index. GitHub Repository. https://github.com/TheEconomist/big-mac-data</p></li>
<li><p>Taiwan Consumer Price Index- Directorate-General of Budget, Accounting and Statistics (DGBAS), Taiwan. (2025). Consumer Price Index Monthly Data (2014–2024). https://eng.stat.gov.tw</p></li>
<li><p>NTD/USD Exchange Rate- Central Bank of the Republic of China (Taiwan). (2025). Monthly Foreign Exchange Rates (NTD/USD). https://www.cbc.gov.tw</p></li>
<li><p>Australian Bureau of Statistics. (2025, January 31). Consumer Price Index, Australia — December Quarter 2024 (ABS Catalogue No.&nbsp;6401.0). https://www.abs.gov.au/statistics/economy/price-indexes-and-inflation/consumer-price-index-australia/dec-quarter-2024</p></li>
<li><p>Lubridate- Garrett Grolemund, Hadley Wickham (2011). Dates and Times Made Easy with lubridate. Journal of Statistical Software, 40(3), 1-25. URL https://www.jstatsoft.org/v40/i03/.</p></li>
<li><p>Rvest- Wickham H (2024). <em>rvest: Easily Harvest (Scrape) Web Pages</em>. R package version 1.0.4, <a href="https://CRAN.R-project.org/package=rvest" class="uri">https://CRAN.R-project.org/package=rvest</a>.</p></li>
<li><p>Tidyverse- Wickham H, Averick M, Bryan J, Chang W, McGowan LD, François R, Grolemund G, Hayes A, Henry L, Hester J, Kuhn M, Pedersen TL, Miller E, Bache SM, Müller K, Ooms J, Robinson D, Seidel DP, Spinu V, Takahashi K, Vaughan D, Wilke C, Woo K, Yutani H (2019). “Welcome to the tidyverse.” <em>Journal of Open Source Software</em>, <em>4</em>(43), 1686. doi:10.21105/joss.01686 <a href="https://doi.org/10.21105/joss.01686" class="uri">https://doi.org/10.21105/joss.01686</a>.</p></li>
</ol>
<!-- Task 2 Tab: Writing your blogpost -->
</section>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<section id="why-analyze-the-big-mac-index" class="level3">
<h3 class="anchored" data-anchor-id="why-analyze-the-big-mac-index">Why analyze the Big Mac Index?</h3>
<p>Recently, residents in Taiwan have expressed growing concerns about the rising cost of living. While prices of food, clothing, and housing have risen due to inflation and increased operational costs, official statistics are often perceived as disconnected from consumers’ lived experiences. The Big Mac Index-originally introduced by The Economist as a tool to measure currency misalignment through burger prices-has gained traction as an informal but intuitive indicator of purchasing power parity and local price levels. But can this burger-based index actually capture the economic pressures people feel in their daily lives in Taiwan?</p>
<p>According to the open letter from President of McDonald’s USA and Statement From McDonald’s Australia, which link price increases to rising operational costs rather than pure profit-seeking, we adopt the assumption that changes in Big Mac prices can serve as a proxy for broader changes in the cost of living. Although Taiwan McDonald’s only mentioned the price adjusting is based on operation policy, such an assumption sets the foundation for our study.</p>
</section>
<section id="methodology-and-data-overview" class="level3">
<h3 class="anchored" data-anchor-id="methodology-and-data-overview">Methodology and Data Overview</h3>
<p>To assess whether the Big Mac Index reflects real cost-of-living changes in Taiwan, our methodology centers on aligning key time points to ensure consistency across all sources. We focused on two main comparisons:</p>
<ol type="1">
<li>How does the Big Mac price in Taiwan correlate with official CPI changes?</li>
</ol>
<p>Australia is included as a control group. By comparing Taiwan’s and Australia’s Big Mac price movement alongside their CPI trends, I aim to highlight potential misalignments or limitations in the Index when applied to Taiwan.</p>
<ol start="2" type="1">
<li>Is the Big Mac Index a reliable indicator of Taiwan’s actual exchange rate (NTD/USD)?</li>
</ol>
<p>I used four datasets:</p>
<ol type="1">
<li><p>Big Mac Index: Sourced from The Economist’s GitHub, containing local burger prices, exchange rates, and implied purchasing power parity (PPP).</p></li>
<li><p>Taiwan CPI Data: From Taiwan’s Directorate-General of Budget, Accounting and Statistics, including monthly General Index and year-over-year percentage change.</p></li>
<li><p>Australia CPI Data: Downloaded from the Australian Bureau of Statistics. Annual inflation rates were reconstructed into index values to align with other datasets.</p></li>
<li><p>NTD/USD Exchange Rate: Scraped from the Central Bank of Taiwan, using the official selling rates.</p></li>
</ol>
<p>To maintain consistency, I shifted CPI and exchange rate dates by one month (e.g., December → following January) to match Big Mac Index release timing. All datasets were cleaned and merged using R, and matched on year and month.</p>
</section>
<section id="analysis-1-big-mac-vs.-cpi-do-they-move-together" class="level3">
<h3 class="anchored" data-anchor-id="analysis-1-big-mac-vs.-cpi-do-they-move-together">Analysis 1: Big Mac vs.&nbsp;CPI – Do they move together?</h3>
<div class="cell">
<div id="fig-cpi" class="cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cpi-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="plotly html-widget html-fill-item" id="htmlwidget-7556a068538daa9f2d7b" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-7556a068538daa9f2d7b">{"x":{"data":[{"x":[16436,16617,16801,16983,17167,17348,17532,17713,17897,18078,18262,18444,18628,18809,18993,19174,19358,19539,19723,19905,20089],"y":[101.69999999999999,103.22549999999998,104.98033349999997,106.03013683499998,107.62058888752497,109.66538007638793,111.74902229783929,114.0957517660939,116.14947529788358,118.00786690264972,120.13200850689742,119.77161248137674,120.84955699370911,125.44184015947006,129.83230456505152,137.75207514351965,148.49673700471419,157.40654122499706,163.86020941522193,170.08689737300037,174.16898290995238],"text":["Date:2015-01-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:101.7","Date:2015-07-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:103.23","Date:2016-01-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:104.98","Date:2016-07-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:106.03","Date:2017-01-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:107.62","Date:2017-07-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:109.67","Date:2018-01-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:111.75","Date:2018-07-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:114.1","Date:2019-01-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:116.15","Date:2019-07-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:118.01","Date:2020-01-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:120.13","Date:2020-07-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:119.77","Date:2021-01-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:120.85","Date:2021-07-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:125.44","Date:2022-01-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:129.83","Date:2022-07-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:137.75","Date:2023-01-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:148.5","Date:2023-07-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:157.41","Date:2024-01-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:163.86","Date:2024-07-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:170.09","Date:2025-01-01<br>Country:Australia<br>Indicator:CPI_index<br>Value:174.17"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"(Australia,CPI_index)","legendgroup":"(Australia,CPI_index)","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[16436,16617,16801,16983,17167,17348,17532,17713,17897,18078,18262,18444,18628,18809,18993,19174,19358,19539,19723,19905,20089],"y":[5.2999999999999998,5.2999999999999998,5.2999999999999998,5.75,5.7999999999999998,5.9000000000000004,5.9000000000000004,6.0499999999999998,6.0999999999999996,6.1500000000000004,6.4500000000000002,6.5499999999999998,6.4800000000000004,6.5499999999999998,6.4000000000000004,6.7000000000000002,7.25,7.4500000000000002,7.7000000000000002,7.75,7.75],"text":["Date:2015-01-01<br>Country:Australia<br>Indicator:local_price<br>Value:5.3","Date:2015-07-01<br>Country:Australia<br>Indicator:local_price<br>Value:5.3","Date:2016-01-01<br>Country:Australia<br>Indicator:local_price<br>Value:5.3","Date:2016-07-01<br>Country:Australia<br>Indicator:local_price<br>Value:5.75","Date:2017-01-01<br>Country:Australia<br>Indicator:local_price<br>Value:5.8","Date:2017-07-01<br>Country:Australia<br>Indicator:local_price<br>Value:5.9","Date:2018-01-01<br>Country:Australia<br>Indicator:local_price<br>Value:5.9","Date:2018-07-01<br>Country:Australia<br>Indicator:local_price<br>Value:6.05","Date:2019-01-01<br>Country:Australia<br>Indicator:local_price<br>Value:6.1","Date:2019-07-01<br>Country:Australia<br>Indicator:local_price<br>Value:6.15","Date:2020-01-01<br>Country:Australia<br>Indicator:local_price<br>Value:6.45","Date:2020-07-01<br>Country:Australia<br>Indicator:local_price<br>Value:6.55","Date:2021-01-01<br>Country:Australia<br>Indicator:local_price<br>Value:6.48","Date:2021-07-01<br>Country:Australia<br>Indicator:local_price<br>Value:6.55","Date:2022-01-01<br>Country:Australia<br>Indicator:local_price<br>Value:6.4","Date:2022-07-01<br>Country:Australia<br>Indicator:local_price<br>Value:6.7","Date:2023-01-01<br>Country:Australia<br>Indicator:local_price<br>Value:7.25","Date:2023-07-01<br>Country:Australia<br>Indicator:local_price<br>Value:7.45","Date:2024-01-01<br>Country:Australia<br>Indicator:local_price<br>Value:7.7","Date:2024-07-01<br>Country:Australia<br>Indicator:local_price<br>Value:7.75","Date:2025-01-01<br>Country:Australia<br>Indicator:local_price<br>Value:7.75"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)","dash":"dash"},"hoveron":"points","name":"(Australia,local_price)","legendgroup":"(Australia,local_price)","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[16436,16617,16801,16983,17167,17348,17532,17713,17897,18078,18262,18444,18628,18809,18993,19174,19358,19539,19723,19905,20089],"y":[94.459999999999994,94.719999999999999,94.579999999999998,95.569999999999993,96.180000000000007,96.530000000000001,97.349999999999994,97.879999999999995,97.290000000000006,98.709999999999994,98.409999999999997,97.980000000000004,98.450000000000003,99.769999999999996,101.04000000000001,103.34999999999999,103.78,105.16,106.58,107.70999999999999,108.81999999999999],"text":["Date:2015-01-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:94.46","Date:2015-07-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:94.72","Date:2016-01-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:94.58","Date:2016-07-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:95.57","Date:2017-01-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:96.18","Date:2017-07-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:96.53","Date:2018-01-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:97.35","Date:2018-07-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:97.88","Date:2019-01-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:97.29","Date:2019-07-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:98.71","Date:2020-01-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:98.41","Date:2020-07-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:97.98","Date:2021-01-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:98.45","Date:2021-07-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:99.77","Date:2022-01-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:101.04","Date:2022-07-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:103.35","Date:2023-01-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:103.78","Date:2023-07-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:105.16","Date:2024-01-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:106.58","Date:2024-07-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:107.71","Date:2025-01-01<br>Country:Taiwan<br>Indicator:CPI_index<br>Value:108.82"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,191,196,1)","dash":"solid"},"hoveron":"points","name":"(Taiwan,CPI_index)","legendgroup":"(Taiwan,CPI_index)","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[16436,16617,16801,16983,17167,17348,17532,17713,17897,18078,18262,18444,18628,18809,18993,19174,19358,19539,19723,19905,20089],"y":[79,79,69,69,69,69,69,69,69,72,72,72,72,72,75,75,75,75,75,75,78],"text":["Date:2015-01-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:79","Date:2015-07-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:79","Date:2016-01-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:69","Date:2016-07-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:69","Date:2017-01-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:69","Date:2017-07-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:69","Date:2018-01-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:69","Date:2018-07-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:69","Date:2019-01-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:69","Date:2019-07-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:72","Date:2020-01-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:72","Date:2020-07-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:72","Date:2021-01-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:72","Date:2021-07-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:72","Date:2022-01-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:75","Date:2022-07-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:75","Date:2023-01-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:75","Date:2023-07-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:75","Date:2024-01-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:75","Date:2024-07-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:75","Date:2025-01-01<br>Country:Taiwan<br>Indicator:local_price<br>Value:78"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,191,196,1)","dash":"dash"},"hoveron":"points","name":"(Taiwan,local_price)","legendgroup":"(Taiwan,local_price)","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.228310502283104,"r":7.3059360730593621,"b":40.182648401826491,"l":43.105022831050235},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[16253.35,20271.650000000001],"tickmode":"array","ticktext":["2016","2018","2020","2022","2024"],"tickvals":[16801,17532,18262,18993,19723],"categoryorder":"array","categoryarray":["2016","2018","2020","2022","2024"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Year","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-3.1434491454976188,182.61243205545],"tickmode":"array","ticktext":["0","50","100","150"],"tickvals":[0,50,100,150],"categoryorder":"array","categoryarray":["0","50","100","150"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Value","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Country<br />Indicator","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"59185126aef":{"x":{},"y":{},"colour":{},"linetype":{},"text":{},"type":"scatter"}},"cur_data":"59185126aef","visdat":{"59185126aef":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cpi-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Big Mac vs.&nbsp;CPI (Australia and Taiwan)
</figcaption>
</figure>
</div>
</div>
<p>According to <a href="#fig-cpi" class="quarto-xref">Figure&nbsp;1</a>, Australia shows a growing gap between CPI and Big Mac prices after 2022. In contrast, Taiwan’s Big Mac prices and CPI present a more consistent trend throughout the same period. This suggests that in Taiwan, Big Mac prices are more closely aligned with domestic inflation, supporting the use of the Big Mac Index as a viable proxy for tracking changes in the cost of living.</p>
</section>
<section id="analysis-2-is-the-big-mac-index-a-reliable-indicator-of-taiwans-actual-exchange-rate-ntdusd" class="level3">
<h3 class="anchored" data-anchor-id="analysis-2-is-the-big-mac-index-a-reliable-indicator-of-taiwans-actual-exchange-rate-ntdusd">Analysis 2: Is the Big Mac Index a reliable indicator of Taiwan’s actual exchange rate (NTD/USD)?</h3>
<div class="cell">
<div id="fig-exchange" class="cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exchange-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="plotly html-widget html-fill-item" id="htmlwidget-fc1e20acf57e980d4431" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-fc1e20acf57e980d4431">{"x":{"data":[{"x":[16436,16617,16801,16983,17167,17348,17532,17713,17897,18078,18262,18444,18628,18809,18993,19174,19358,19539,19723,19905,20089],"y":[31.492999999999999,31.02,33.231499999999997,32.029000000000003,31.905000000000001,30.477499999999999,29.553000000000001,30.372499999999999,30.803000000000001,31.172000000000001,29.884499999999999,29.456499999999998,27.98,28.047499999999999,27.814,29.907499999999999,30.369,31.426500000000001,31.3475,32.869999999999997,32.728000000000002],"text":["Date: 2015-01-01<br>Indicator: dollar_ex<br>Value: 31.49","Date: 2015-07-01<br>Indicator: dollar_ex<br>Value: 31.02","Date: 2016-01-01<br>Indicator: dollar_ex<br>Value: 33.23","Date: 2016-07-01<br>Indicator: dollar_ex<br>Value: 32.03","Date: 2017-01-01<br>Indicator: dollar_ex<br>Value: 31.91","Date: 2017-07-01<br>Indicator: dollar_ex<br>Value: 30.48","Date: 2018-01-01<br>Indicator: dollar_ex<br>Value: 29.55","Date: 2018-07-01<br>Indicator: dollar_ex<br>Value: 30.37","Date: 2019-01-01<br>Indicator: dollar_ex<br>Value: 30.8","Date: 2019-07-01<br>Indicator: dollar_ex<br>Value: 31.17","Date: 2020-01-01<br>Indicator: dollar_ex<br>Value: 29.88","Date: 2020-07-01<br>Indicator: dollar_ex<br>Value: 29.46","Date: 2021-01-01<br>Indicator: dollar_ex<br>Value: 27.98","Date: 2021-07-01<br>Indicator: dollar_ex<br>Value: 28.05","Date: 2022-01-01<br>Indicator: dollar_ex<br>Value: 27.81","Date: 2022-07-01<br>Indicator: dollar_ex<br>Value: 29.91","Date: 2023-01-01<br>Indicator: dollar_ex<br>Value: 30.37","Date: 2023-07-01<br>Indicator: dollar_ex<br>Value: 31.43","Date: 2024-01-01<br>Indicator: dollar_ex<br>Value: 31.35","Date: 2024-07-01<br>Indicator: dollar_ex<br>Value: 32.87","Date: 2025-01-01<br>Indicator: dollar_ex<br>Value: 32.73"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"dollar_ex","legendgroup":"dollar_ex","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)","dash":"solid"},"frame":null},{"x":[16436,16617,16801,16983,17167,17348,17532,17713,17897,18078,18262,18444,18628,18809,18993,19174,19358,19539,19723,19905,20089],"y":[31.451000000000001,31.113,33.006,32.399999999999999,32.012,30.265000000000001,29.983000000000001,30.079999999999998,30.826000000000001,31.335000000000001,30.324999999999999,29.751999999999999,28.539000000000001,27.797000000000001,27.760999999999999,29.632000000000001,30.670999999999999,30.824000000000002,31.282,32.386000000000003,32.573999999999998],"text":["Date: 2015-01-01<br>Indicator: NTD_USD<br>Value: 31.45","Date: 2015-07-01<br>Indicator: NTD_USD<br>Value: 31.11","Date: 2016-01-01<br>Indicator: NTD_USD<br>Value: 33.01","Date: 2016-07-01<br>Indicator: NTD_USD<br>Value: 32.4","Date: 2017-01-01<br>Indicator: NTD_USD<br>Value: 32.01","Date: 2017-07-01<br>Indicator: NTD_USD<br>Value: 30.26","Date: 2018-01-01<br>Indicator: NTD_USD<br>Value: 29.98","Date: 2018-07-01<br>Indicator: NTD_USD<br>Value: 30.08","Date: 2019-01-01<br>Indicator: NTD_USD<br>Value: 30.83","Date: 2019-07-01<br>Indicator: NTD_USD<br>Value: 31.34","Date: 2020-01-01<br>Indicator: NTD_USD<br>Value: 30.32","Date: 2020-07-01<br>Indicator: NTD_USD<br>Value: 29.75","Date: 2021-01-01<br>Indicator: NTD_USD<br>Value: 28.54","Date: 2021-07-01<br>Indicator: NTD_USD<br>Value: 27.8","Date: 2022-01-01<br>Indicator: NTD_USD<br>Value: 27.76","Date: 2022-07-01<br>Indicator: NTD_USD<br>Value: 29.63","Date: 2023-01-01<br>Indicator: NTD_USD<br>Value: 30.67","Date: 2023-07-01<br>Indicator: NTD_USD<br>Value: 30.82","Date: 2024-01-01<br>Indicator: NTD_USD<br>Value: 31.28","Date: 2024-07-01<br>Indicator: NTD_USD<br>Value: 32.39","Date: 2025-01-01<br>Indicator: NTD_USD<br>Value: 32.57"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(0,191,196,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,196,1)"}},"hoveron":"points","name":"NTD_USD","legendgroup":"NTD_USD","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","line":{"width":1.8897637795275593,"color":"rgba(0,191,196,1)","dash":"solid"},"frame":null}],"layout":{"margin":{"t":26.228310502283104,"r":7.3059360730593621,"b":40.182648401826491,"l":37.260273972602747},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[16253.35,20271.650000000001],"tickmode":"array","ticktext":["2016","2018","2020","2022","2024"],"tickvals":[16801,17532,18262,18993,19723],"categoryorder":"array","categoryarray":["2016","2018","2020","2022","2024"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Year","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[27.487475,33.505024999999996],"tickmode":"array","ticktext":["28","30","32"],"tickvals":[28,30,32],"categoryorder":"array","categoryarray":["28","30","32"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Value","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Indicator","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"591819051a76":{"x":{},"y":{},"colour":{},"text":{},"type":"scatter"},"5918271118ab":{"x":{},"y":{},"colour":{},"text":{}}},"cur_data":"591819051a76","visdat":{"591819051a76":["function (y) ","x"],"5918271118ab":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exchange-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Big Mac PPP vs Actual Exchange Rate
</figcaption>
</figure>
</div>
</div>
<p>Though the implied rate (dollar_ex) and the official NTD/USD rate (NTD_USD) in <a href="#fig-exchange" class="quarto-xref">Figure&nbsp;2</a> move closely together, we observe that the actual exchange rate is consistently slightly lower than the Big Mac implied rate.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-valuation" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-valuation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="assignment4_template_TY_files/figure-html/fig-valuation-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-valuation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Taiwan Dollar Valuation Based on Big Mac Index
</figcaption>
</figure>
</div>
</div>
</div>
<p>To better highlight the Big Mac Index’s estimation power, I first directly compared the implied rate (dollar_ex) and the official NTD/USD rate (NTD_USD) in <a href="#fig-exchange" class="quarto-xref">Figure&nbsp;2</a>. While the lines appeared close, <a href="#fig-valuation" class="quarto-xref">Figure&nbsp;3</a> shows that the valuation remains negative over the entire period — indicating a consistent undervaluation of the TWD. When interpreted alongside Taiwan’s steadily rising CPI and Big Mac prices, this undervaluation implies that the real cost of living may have increased more than what the nominal exchange rate alone would suggest — reinforcing the argument that the Big Mac Index does capture aspects of local price pressure not directly reflected in the official rate.</p>
</section>
<section id="conclusions" class="level3">
<h3 class="anchored" data-anchor-id="conclusions">Conclusions</h3>
<p>Based on our analysis of CPI, Big Mac prices, and exchange rate data between 2015 and 2024, the Big Mac Index does partially reflect real cost-of-living changes in Taiwan.</p>
<p>First, the trend of Taiwan’s Big Mac prices close to its CPI, suggesting that McDonald’s pricing behavior follows with inflationary pressures. In contrast, Australia, as a control group, shows a wider gap between its Big Mac price trend and CPI movement in recent years. This comparison presents the idea that in Taiwan, Big Mac pricing serves as a valid consumer-side indicator of rising living costs.</p>
<p>Second, although Taiwan’s official NTD/USD exchange rate generally tracks the implied PPP rate from the Big Mac Index, it consistently remains slightly below it. This persistent undervaluation suggests that Taiwan’s currency may be slightly underpriced compared to its actual purchasing power, also supporting the notion that cost-of-living burdens may be underestimated by official rates alone.</p>
<p>In conclusion, these findings indicate that the Big Mac Index, despite its simplicity, offers a useful and intuitive supplement to government-reported indicators, especially where consumer sentiment and real-world price perception matter. It may not replace the CPI or official exchange rates, but it does provide a complementary lens into how inflation and currency value feel at the consumer level. While the Big Mac Index offers consumer-centered insights, it remains limited by its reliance on a single product and potential regional pricing strategies. Future studies could explore multi-item price baskets or integrate real wage data for more holistic comparisons.</p>
<p>So, do government-issued statistics fully capture what people are really experiencing in their daily cost of living?</p>
<p>(869 words)</p>
</section>
<section id="references" class="level3">
<h3 class="anchored" data-anchor-id="references">References</h3>
<ol type="1">
<li><p>McDonald’s USA. (2024). Open Letter from McDonald’s USA President. https://corporate.mcdonalds.com</p></li>
<li><p>McDonald’s Australia. (2024). Statement from McDonald’s Australia on Pricing. https://mcdonalds.com.au/</p></li>
<li><p>Plotly- C. Sievert. Interactive Web-Based Data Visualization with R, plotly, and shiny. Chapman and Hall/CRC Florida, 2020.</p></li>
<li><p>Big Mac Index- The Economist. (2025). Big Mac Index. GitHub Repository. https://github.com/TheEconomist/big-mac-data</p></li>
<li><p>Taiwan Consumer Price Index- Directorate-General of Budget, Accounting and Statistics (DGBAS), Taiwan. (2025). Consumer Price Index Monthly Data (2014–2024). https://eng.stat.gov.tw</p></li>
<li><p>NTD/USD Exchange Rate- Central Bank of the Republic of China (Taiwan). (2025). Monthly Foreign Exchange Rates (NTD/USD). https://www.cbc.gov.tw</p></li>
<li><p>Australian Bureau of Statistics. (2025, January 31). Consumer Price Index, Australia — December Quarter 2024 (ABS Catalogue No.&nbsp;6401.0). https://www.abs.gov.au/statistics/economy/price-indexes-and-inflation/consumer-price-index-australia/dec-quarter-2024</p></li>
</ol>
</section>
<section id="ai-ackownledgement" class="level3">
<h3 class="anchored" data-anchor-id="ai-ackownledgement">AI Ackownledgement</h3>
<p>The <a href="https://chatgpt.com/share/68526423-d0fc-8001-8841-4a2591ecbe07">queries</a> I asked GPT:</p>
<ol type="1">
<li><p>How to transfer the date form from <code>2015 Jan</code> to <code>2015 &amp; 1</code> for join the two dataset</p></li>
<li><p>How to exclude the footnote in dataset</p></li>
<li><p>The period diff. adjusting between wrangling and raw data</p></li>
<li><p>Setting YoY_rate to index</p></li>
<li><p>solve issue that ggplotly got blank result</p></li>
</ol>
<!-- Task 3 Tab: Behind the Scenes -  -->
</section>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<section id="whats-in-this-section" class="level3">
<h3 class="anchored" data-anchor-id="whats-in-this-section">What’s in this section</h3>
<p>Here is where you should tell us about your reflection on your analysis (Task 3).</p>
<section id="question-5" class="level4">
<h4 class="anchored" data-anchor-id="question-5">Question 5</h4>
<p>Although the Big Mac dataset from The Economist is comprehensive, processing the rest of the datasets was quite tedious. For instance, the exchange rate data was only available via HTML with inconsistent date formats. I had to write custom scraping logic and manually identify and align June and December data to match the Big Mac Index’s release schedule (1, January and 1, July). This added complexity to date matching and joins.</p>
<p>Additionally, Australia’s CPI was reported as year-over-year percentages, while Taiwan’s CPI used an index format. To make cross-country comparisons, I had to manually reconstruct Australia’s CPI into an index using 2015 as the base year. These steps were time-consuming but necessary to ensure consistency across datasets.</p>
</section>
<section id="question-6" class="level4">
<h4 class="anchored" data-anchor-id="question-6">Question 6</h4>
<p>A key challenge was finding official support for my assumption that McDonald’s pricing reflects operational costs. Taiwan’s McDonald’s only cited “operational strategy” with no further detail, making my analysis vulnerable. To address this, I sourced official statements from the U.S. and Australia, and added Australian data as a comparative control.</p>
<p>On the coding side, I struggled to get geom_line() to work—it kept returning blank plots. Eventually, I discovered I needed to include a group aesthetic to ensure lines connected properly. It was frustrating but rewarding to debug this. I also tried using geom_point() as a fallback but preferred line charts for showing trends.</p>
</section>
<section id="question-7" class="level4">
<h4 class="anchored" data-anchor-id="question-7">Question 7</h4>
<p>While the Big Mac Index proved useful for comparing trends, the analysis lacks real wage data which would have allowed for a better affordability analysis. Since the pressure of living would not only affected by cost but also the income. Second, the McDonald’s prices likely reflect limited urban regions, making national generalisation difficult. Also, the assumption that one product can proxy for all living costs, especially given Taiwan’s diverse consumption patterns is overly simplistic. This limits the scope of the analysis and makes it vulnerable to product-specific biases.</p>
</section>
<section id="qusetion-8" class="level4">
<h4 class="anchored" data-anchor-id="qusetion-8">Qusetion 8</h4>
<p>I use GitHub to do the version control <a href="https://github.com/Shayna-Yang/5512-assignment4-TY#">Link to repository</a></p>
<ul>
<li><p><strong>v1- Commit 860d6fc: </strong>In this version, I change the big mac data from raw data to full data. The reason is that I found the raw data I initially use will lack of information which the raw data lacked USD valuation and other critical fields to do the analysis I want to do. So I switched datasets and created new variables using mutate().</p></li>
<li><p><strong>v2- Commit 042f9de: </strong>In this version, I restructured the research question by moving the third sub-question to the conclusion, making the logical flow smoother. Also, I found that I need a comparison group to support my further analysis, so I add a new dataset into the project for more detailed analysis.</p></li>
<li><p><strong>v3- Commit eb56167: </strong>In this version, I found that I use the wrong period to match the date of big mac data. I collect all the data again and correct the code and documentation for data wrangling and processing part. Also, I found that Australia CPI is percentage format so I tried to change it into index (set 2015 = base = 100).</p></li>
<li><p><strong>v4- Commit def1376: </strong>In this version, I revisited the report structure and documentation of my report. I change the order of sub-question to improve the logical flow and correct the period mistake.</p></li>
</ul>
</section>
</section>
</div>
</div>
</div>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>